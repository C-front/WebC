# Проект "Web-c"

Суть проекта в создании фреймворка для статической генерации и последующего запуска проекта через собственный сервер, написанный на C.

## Как запустить?

1. `./server` – запускает сервер на `http://localhost:8081`. Сервер видит все файлы в текущей директории, для проверки работоспособности перейдите по адресу и вы должны увидеть <b>`server works!`</b>. Для изменения корневого файла изменить содержимое `itworks` или же измените `server.c`, затем скомпилируйте и запустите заново. После этого ваш сервер <b>работает</b>.

2. `test.c` – содержит пример использование файлов `css_styles.h` и `html_tags.h`. Подключите их, затем используйте внутренние теги. Для генерации ипользуйте `generate.c`, основная функция которого принимает _<b>функцию A со сгенерировшимися тегами HTML, CSS и тд.</b>_, название нового файла и остальные аргументы, для функции <b>A</b>.

3. После запуска `test.c` или любого другого вашего файла сгенерируются файлы (например `vanya.html`), после чего ваш сервер начнет отдавать их по запросу, например, `http://localhost:8081/vanya.html`.

4. Для генерации HTML разметки используйте тегн из `html_tags.h`, для генерации CSS-стилей используйте теги из `css_styles.h`, для генерации JS используйте встроенный в `html_tags.h` макрос `SCRIPT`.

## useEffect и useState

useState - хук, позволяющий хранить состояние компонента между его рендерами

useEffect - хук, позволяющий выполнять какие-либо действия при изменении состояния

При реализованной системе генерации HTML интегрировать WASM, взаимодействуюющий с DOM не представляется возможным. Для реализации полноценной динамики веб приложения на C необходимо использовать концепцию virtual DOM, которая сильно идет в разрез с существующей архитектурой проекта.

Однако реализация вышеуказанных хуков есть.

### useState

Реализованный хук предоставляет возможность создания, обновления и удаления.

```c
//Создание состояния
State* counter = create_state(0);

void button_click() {
    //При нажатии кнопки мы берем старое значение counter и прибавляем к нему единицу
    update_state(counter, read_state(counter) + 1);
}

```

### useEffect

Реализованный хук позваляет прикрепить зависимости к каким-либо переменным и выполнять действия при изменении оных. Также реализовано глобальное хранилище эффектов для более удобного взаимодействия с ними

```c
void mount_effect() {
    printf("Компонент смонтирован");
}

void update_effect() {
    printf("Зависимости обновлены");
}

void setup_example() {
    //Создание эффекта без зависимостей - выполнится только при монтировании компонента
    register_effect(mount_effect, NULL, 0);
    
    //Создание эффекта с двумя зависимоятями
    int deps[2] = {1, 2};
    register_effect(update_effect, deps, 2);
    
    //Изменеиние зависимостей эффекта через глобальное хранилище эффектов
    int new_deps[2] = {1, 3};
    update_dependencies(1, new_deps, 2);
}
```
